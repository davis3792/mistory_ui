<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-input/paper-textarea.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/iron-collapse/iron-collapse.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../bower_components/iron-form/iron-form.html">
<link rel="import" href="../../bower_components/iron-list/iron-list.html">

<dom-module id="epilog-detail">
  <template>
	<style>
		:host {
		display: block
		}
	</style>

        <iron-ajax 
                auto
                url="http://192.168.1.69:3001/api/v1/epilogs/{{dataId}}"
                last-response="{{epilog}}"
                headers='{"Authorization" : "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0eXBlIjoiYXBpa2V5IiwiYXBwTmFtZSI6Im1pc3RvcnkiLCJpYXQiOjE0Nzc2MTYyMzN9.jp2s5d2pQHo4DT6nMozb3t_XqdXFeDAbCKS12pMD6AA"}'
                handleAs="json">
        </iron-ajax>

	<form is="iron-form" id="form" method="post" action="">
		<paper-input label="Title" value="{{epilog.title}}"></paper-input>
		<paper-textarea label="Details" value="{{epilog.detail}}"></paper-textarea>
		<paper-button raised on-tap="_submit">Submit</paper-button>
	</form>

  </template>

  <script>
    Polymer({

	is: 'epilog-detail',

	properties: {
		dataId: {
			type: String,
			reflectToAttribute: true
		},
		readonly: {
			type: Boolean,
			value: true
		}
	},

	_submit: function(e) {
		console.log("submitted", e);
		//console.log("form=", this.$.form.request.body
		var body = this.$.form.request.body;
		console.log("body=", body);
		Polymer.dom(event).localTarget.parentElement.submit();
	},

	printObj: function(o) {
		console.log(o);
	},
	_edit: function(e) {
		this.readonly = false;

	},
    });
  </script>
</dom-module>
